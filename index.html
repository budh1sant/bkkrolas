<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BKK SMKN 12 Surabaya</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM via CDN (Versi 18.2.0 Stabil) -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel untuk memproses JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Animasi */
        @keyframes floatIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .chat-animate { animation: floatIn 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- ICONS & ASSETS ---
        const IconBase = ({ size = 24, className = "", children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const Icon = ({ component: Component, ...props }) => { if (!Component) return null; return <Component {...props} />; };

        const Briefcase = (props) => <IconBase {...props}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>;
        const User = (props) => <IconBase {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const Building2 = (props) => <IconBase {...props}><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></IconBase>;
        const MapPin = (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const Search = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></IconBase>;
        const Menu = (props) => <IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconBase>;
        const X = (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>;
        const XCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></IconBase>;
        const BarChart3 = (props) => <IconBase {...props}><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></IconBase>;
        const LogOut = (props) => <IconBase {...props}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></IconBase>;
        const Plus = (props) => <IconBase {...props}><path d="M5 12h14"/><path d="M12 5v14"/></IconBase>;
        const Upload = (props) => <IconBase {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></IconBase>;
        const Download = (props) => <IconBase {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></IconBase>;
        const Eye = (props) => <IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const School = (props) => <IconBase {...props}><path d="m4 6 8-4 8 4"/><path d="m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2"/><path d="M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"/><path d="M18 5v17"/><path d="M6 5v17"/><circle cx="12" cy="9" r="2"/></IconBase>;
        const Phone = (props) => <IconBase {...props}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconBase>;
        const Mail = (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>;
        const Users = (props) => <IconBase {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>;
        const Award = (props) => <IconBase {...props}><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></IconBase>;
        const Sparkles = (props) => <IconBase {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M3 5h2"/></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const FileUp = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M12 12v6"/><path d="m15 15-3-3-3 3"/></IconBase>;
        const MessageCircle = (props) => <IconBase {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></IconBase>;
        const Send = (props) => <IconBase {...props}><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconBase>;
        const Lock = (props) => <IconBase {...props}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></IconBase>;
        const EyeOff = (props) => <IconBase {...props}><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></IconBase>;

        const GoogleIcon = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24px" height="24px" {...props}>
                <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
            </svg>
        );

        // --- CONSTANTS & DATA ---
        const MAJORS = [
            "Seni Pedalangan", "Seni Musik", "Seni Teater", "Seni Tari", "Seni Karawitan", 
            "Desain Komunikasi Visual (DKV)", "Animasi", "Pengembangan Perangkat Lunak & Gim (PPLG)", 
            "Desain Interior dan Teknik Furnitur", "Kriya Kreatif Batik dan Tekstil", "Kriya Kreatif Kayu", 
            "Kriya Kreatif Logam dan Perhiasan", "Kriya Kreatif Kulit dan Imitasi", "Seni Lukis"
        ];
        const LOOKER_STUDIO_URL = "https://lookerstudio.google.com/embed/reporting/eafb69d2-361a-4f6a-9df6-fb05e2515ca8/page/2bEcD";
        const LOOKER_STUDIO_LINK = "https://lookerstudio.google.com/reporting/eafb69d2-361a-4f6a-9df6-fb05e2515ca8/page/2bEcD";
        const INITIAL_JOBS = [
            { id: 1, title: 'Game Developer Junior', company: 'Mojiken Studio', location: 'Surabaya', type: 'Full Time', category: 'Pengembangan Perangkat Lunak & Gim (PPLG)', salary: 'Rp 4.500.000', deadline: '2025-12-30', status: 'Active', description: 'Membutuhkan lulusan PPLG untuk pengembangan game 2D/3D.' },
            { id: 2, title: 'Illustrator & Animator', company: 'Mechanimotion', location: 'Surabaya', type: 'Magang', category: 'Animasi', salary: 'Rp 2.500.000', deadline: '2025-11-15', status: 'Active', description: 'Membuat aset animasi dan ilustrasi untuk kebutuhan konten digital.' },
            { id: 3, title: 'Pengrajin Furniture', company: 'Olympic Furniture', location: 'Gresik', type: 'Full Time', category: 'Kriya Kreatif Kayu', salary: 'Rp 4.800.000', deadline: '2025-10-20', status: 'Active', description: 'Ahli dalam ukir dan finishing kayu untuk furniture ekspor.' },
            { id: 4, title: 'Desainer Grafis', company: 'Jawa Pos', location: 'Surabaya', type: 'Freelance', category: 'Desain Komunikasi Visual (DKV)', salary: 'Negosiasi', deadline: '2025-12-01', status: 'Pending', description: 'Membuat layout koran dan konten sosial media.' },
        ];
        const INITIAL_USERS = [
            { id: 201, name: 'HRD Mojiken Studio', role: 'company', companyName: 'Mojiken Studio', email: 'hrd@mojiken.com', verified: true },
            { id: 202, name: 'HRD Jawa Pos', role: 'company', companyName: 'Jawa Pos', email: 'hrd@jawapos.com', verified: false },
            { id: 999, name: 'Admin BKK', role: 'admin', email: 'budhisant@gmail.com' }
        ];

        // --- GLOBAL COMPONENTS ---

        const JobCard = ({ job, isPublic = true, isAdmin = false, isCompany = false, onApply, onApprove, onDelete, onViewApplicants, user }) => (
            <div className="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition border border-gray-100 flex flex-col h-full">
                <div className="p-6 flex-grow">
                    <div className="flex justify-between items-start mb-2">
                    <span className={`text-xs font-semibold px-2 py-1 rounded bg-blue-100 text-blue-800`}>
                        {job.category}
                    </span>
                    {!isPublic && (
                        <span className={`text-xs px-2 py-1 rounded border ${job.status === 'Active' ? 'border-green-500 text-green-600' : 'border-red-500 text-red-600'}`}>
                        {job.status}
                        </span>
                    )}
                    </div>
                    <h3 className="text-lg font-bold text-gray-800 mb-1">{job.title}</h3>
                    <div className="flex items-center text-gray-600 text-sm mb-4">
                    <Icon component={Building2} size={14} className="mr-1" />
                    <span className="mr-3">{job.company}</span>
                    <Icon component={MapPin} size={14} className="mr-1" />
                    <span>{job.location}</span>
                    </div>
                    <p className="text-gray-500 text-sm mb-4 line-clamp-3">{job.description}</p>
                    <div className="text-sm text-gray-600">
                    <p><strong>Gaji:</strong> {job.salary}</p>
                    <p className="text-red-500 text-xs mt-1">Deadline: {job.deadline}</p>
                    </div>
                </div>
                <div className="bg-gray-50 p-4 border-t border-gray-100">
                    {isAdmin ? (
                    <div className="flex space-x-2">
                        {job.status === 'Pending' && (
                        <button onClick={() => onApprove(job.id)} className="w-full bg-green-500 text-white py-2 rounded text-sm hover:bg-green-600">Approve</button>
                        )}
                        <button onClick={() => onDelete(job.id)} className="w-full bg-red-500 text-white py-2 rounded text-sm hover:bg-red-600">Hapus</button>
                    </div>
                    ) : isCompany ? (
                    <button className="w-full bg-blue-600 text-white py-2 rounded text-sm hover:bg-blue-700">Lihat Pelamar</button>
                    ) : (
                    <button 
                        onClick={() => onApply(job)}
                        className="w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 flex items-center justify-center"
                    >
                        Lamar Sekarang <Icon component={ChevronRight} size={16} className="ml-1" />
                    </button>
                    )}
                </div>
            </div>
        );

        const Navbar = ({ view, setView, user, handleLogout }) => (
            <nav className="bg-blue-900 text-white shadow-lg sticky top-0 z-50">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between h-16 items-center">
                        <div className="flex items-center cursor-pointer" onClick={() => setView('home')}>
                            <Icon component={School} className="h-8 w-8 text-yellow-400 mr-2" />
                            <div>
                                <h1 className="font-bold text-xl leading-none">BKK SMKN 12 Surabaya</h1>
                                <span className="text-xs text-blue-200">Bursa Kerja Khusus</span>
                            </div>
                        </div>
                        <div className="hidden md:flex space-x-4">
                            <button onClick={() => setView('home')} className={`hover:text-yellow-400 ${view === 'home' ? 'text-yellow-400 font-bold' : ''}`}>Beranda</button>
                            <button onClick={() => { setView('home'); setTimeout(()=> document.getElementById('jobs-section')?.scrollIntoView(), 100)}} className="hover:text-yellow-400">Lowongan</button>
                            <button onClick={() => setView('alumni_data')} className={`hover:text-yellow-400 flex items-center ${view === 'alumni_data' ? 'text-yellow-400 font-bold' : ''}`}>
                                <Icon component={BarChart3} size={16} className="mr-1"/> Data Alumni
                            </button>
                            {!user ? (
                            <button onClick={() => setView('login')} className="bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-bold py-1 px-4 rounded transition">
                                Login / Daftar
                            </button>
                            ) : (
                            <div className="flex items-center space-x-3">
                                <span className="text-sm">Hi, {user.name}</span>
                                <button onClick={() => {
                                    if(user.role === 'student') setView('dashboard_student');
                                    if(user.role === 'company') setView('dashboard_company');
                                    if(user.role === 'admin') setView('dashboard_admin');
                                }} className="text-gray-300 hover:text-white"><Icon component={User} size={20}/></button>
                                <button onClick={handleLogout} className="text-red-300 hover:text-red-500"><Icon component={LogOut} size={20}/></button>
                            </div>
                            )}
                        </div>
                    </div>
                </div>
            </nav>
        );

        const HeroSection = ({ setView }) => (
            <div className="relative bg-blue-800 text-white overflow-hidden">
                <div className="absolute inset-0 opacity-20 bg-[url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1351&q=80')] bg-cover bg-center"></div>
                <div className="max-w-7xl mx-auto px-4 py-24 relative z-10 text-center">
                    <h2 className="text-4xl md:text-5xl font-bold mb-4">Jembatan Masa Depan Karir Anda</h2>
                    <p className="text-xl text-blue-100 mb-8 max-w-2xl mx-auto">
                    Menghubungkan talenta terbaik SMKN 12 Surabaya dengan dunia industri.
                    </p>
                    <div className="flex justify-center space-x-4">
                    <button onClick={() => document.getElementById('jobs-section').scrollIntoView({behavior:'smooth'})} className="bg-yellow-500 text-blue-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-400 transition transform hover:-translate-y-1">
                        Cari Lowongan
                    </button>
                    <button onClick={() => setView('alumni_data')} className="bg-transparent border-2 border-white text-white font-bold py-3 px-8 rounded-full hover:bg-white hover:text-blue-900 transition flex items-center">
                        <Icon component={BarChart3} size={20} className="mr-2"/> Data Alumni
                    </button>
                    </div>
                    
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12 text-center">
                        <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm">
                            <h3 className="text-3xl font-bold text-yellow-400">500+</h3>
                            <p className="text-sm">Alumni Bekerja</p>
                        </div>
                        <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm">
                            <h3 className="text-3xl font-bold text-yellow-400">50+</h3>
                            <p className="text-sm">Mitra Industri</p>
                        </div>
                        <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm">
                            <h3 className="text-3xl font-bold text-yellow-400">10+</h3>
                            <p className="text-sm">Lowongan Aktif</p>
                        </div>
                        <div className="bg-white/10 p-4 rounded-lg backdrop-blur-sm">
                            <h3 className="text-3xl font-bold text-yellow-400">95%</h3>
                            <p className="text-sm">Tingkat Kepuasan</p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const Chatbot = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([
                { id: 1, text: "Selamat datang di Layanan Pelanggan BKK SMKN 12 Surabaya! ðŸ‘‹\n\nTerima kasih telah berkunjung. Saya Asisten Virtual Anda yang siap membantu.", sender: 'bot' }
            ]);
            const [input, setInput] = useState("");
            const [isTyping, setIsTyping] = useState(false);
            const messagesEndRef = useRef(null);

            useEffect(() => { messagesEndRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isTyping]);

            const handleSend = (text = input) => {
                if (!text.trim()) return;
                setMessages(prev => [...prev, { id: Date.now(), text, sender: 'user' }]);
                setInput("");
                setIsTyping(true);
                
                setTimeout(() => {
                    let botText = "Maaf, silakan hubungi admin via WhatsApp.";
                    const lower = text.toLowerCase();
                    if (lower.includes('halo')) botText = "Halo! Ada yang bisa saya bantu?";
                    else if (lower.includes('lowongan')) botText = "Cek menu 'Lowongan' di beranda.";
                    else if (lower.includes('kontak') || lower.includes('alamat')) botText = "Alamat: Jl Siwalankerto Permai 1A Surabaya. WA: +62 813-3053-3131.";
                    else if (lower.includes('alumni')) botText = "Lihat menu 'Data Alumni' di atas.";
                    
                    setIsTyping(false);
                    setMessages(prev => [...prev, { id: Date.now()+1, text: botText, sender: 'bot' }]);
                }, 1500);
            };

            return (
                <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end font-sans">
                    {isOpen && (
                        <div className="bg-white rounded-2xl shadow-2xl w-80 sm:w-96 flex flex-col border border-gray-100 overflow-hidden mb-4 chat-animate ring-1 ring-black/5">
                            <div className="bg-gradient-to-r from-blue-800 to-blue-600 text-white p-4 flex justify-between items-center shadow-md">
                                <div className="flex items-center gap-3"><div className="bg-white/20 p-2 rounded-full"><Icon component={MessageCircle} size={20} className="text-white"/></div><div><h4 className="font-bold">Asisten BKK</h4><span className="text-xs opacity-90">Online</span></div></div>
                                <button onClick={() => setIsOpen(false)} className="text-white/80 hover:text-white"><Icon component={X} size={20}/></button>
                            </div>
                            <div className="flex-grow p-4 h-96 overflow-y-auto bg-slate-50 space-y-4">
                                {messages.map(msg => (
                                    <div key={msg.id} className={`flex w-full ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`max-w-[80%] p-3.5 text-sm shadow-sm ${msg.sender === 'user' ? 'bg-blue-600 text-white rounded-2xl rounded-tr-sm' : 'bg-white text-gray-700 border border-gray-100 rounded-2xl rounded-tl-sm'}`}>{msg.text}</div>
                                    </div>
                                ))}
                                {isTyping && <div className="text-gray-400 text-xs ml-4">Sedang mengetik...</div>}
                                <div ref={messagesEndRef} />
                            </div>
                            <div className="p-3 bg-white border-t border-gray-100 flex"><input type="text" className="w-full bg-gray-100 border-0 rounded-full pl-4 pr-12 py-3 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Ketik pesan..." value={input} onChange={e => setInput(e.target.value)} onKeyPress={e => e.key === 'Enter' && handleSend()} /><button onClick={() => handleSend()} disabled={!input.trim()} className="absolute right-6 mt-2 text-blue-600"><Icon component={Send} size={20}/></button></div>
                        </div>
                    )}
                    <button onClick={() => setIsOpen(!isOpen)} className="bg-gradient-to-r from-blue-600 to-blue-500 text-white p-4 rounded-full shadow-xl hover:scale-110 transition">{isOpen ? <Icon component={X} size={28} /> : <Icon component={MessageCircle} size={28} />}</button>
                </div>
            );
        };

        const AlumniDataView = () => {
            const statsStatus = [ { label: 'Bekerja', count: 450, color: '#22c55e' }, { label: 'Kuliah', count: 120, color: '#3b82f6' }, { label: 'Wirausaha', count: 80, color: '#eab308' }, { label: 'Belum', count: 30, color: '#ef4444' } ];
            const alumniDetails = [
                { id: 1, name: "Andi Saputra", major: "PPLG", status: "Bekerja", detail: "PT. Telkom" },
                { id: 2, name: "Siti Aminah", major: "Akuntansi", status: "Kuliah", detail: "UNAIR" },
                { id: 3, name: "Budi Santoso", major: "DKV", status: "Wirausaha", detail: "Studio Desain" },
            ];
            
            // Helper Components for Charts (Simplified for brevity but functional)
            const Bar = ({ pct, color }) => <div className="w-full bg-gray-100 rounded-full h-2"><div className="h-2 rounded-full transition-all" style={{width: `${pct}%`, backgroundColor: color}}></div></div>;

            return (
                <div className="min-h-screen bg-gray-50 flex flex-col">
                    <div className="bg-blue-800 text-white py-12 text-center"><h2 className="text-3xl font-bold mb-2">Dashboard Data Alumni</h2><p>Statistik Keterserapan Lulusan SMKN 12 Surabaya</p></div>
                    <div className="max-w-7xl mx-auto w-full px-4 py-8 flex-grow space-y-8">
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">{statsStatus.map((s,i) => <div key={i} className="bg-white p-4 rounded shadow border-l-4" style={{borderLeftColor:s.color}}><p className="text-sm text-gray-500">{s.label}</p><h3 className="text-2xl font-bold">{s.count}</h3></div>)}</div>
                        <div className="bg-white p-6 rounded shadow"><h3 className="font-bold mb-4">Detail Alumni (Sampel)</h3>
                            <table className="min-w-full text-sm text-left"><thead><tr className="border-b"><th>Nama</th><th>Jurusan</th><th>Status</th><th>Ket</th></tr></thead><tbody>{alumniDetails.map(a => <tr key={a.id} className="border-b"><td className="py-2">{a.name}</td><td>{a.major}</td><td>{a.status}</td><td>{a.detail}</td></tr>)}</tbody></table>
                        </div>
                        <div className="bg-blue-900 rounded-xl p-8 text-center text-white shadow-lg"><h3 className="font-bold text-xl mb-2">Lihat Data Lengkap?</h3><a href={LOOKER_STUDIO_LINK} target="_blank" className="inline-flex items-center bg-yellow-400 text-blue-900 px-8 py-3 rounded-full font-bold shadow-lg hover:bg-yellow-300"><Icon component={Eye} size={20} className="mr-2"/> Buka Laporan Looker Studio</a></div>
                    </div>
                </div>
            );
        };

        const PublicHome = ({ jobs, setSearchTerm, filterCategory, setFilterCategory, handleApply, setView }) => {
            return (
                <>
                <HeroSection setView={setView} />
                <div id="jobs-section" className="max-w-7xl mx-auto px-4 -mt-8 relative z-20">
                    <div className="bg-white p-6 rounded-lg shadow-lg flex flex-col md:flex-row gap-4 items-center">
                        <div className="relative flex-grow w-full"><Icon component={Search} className="absolute left-3 top-3 text-gray-400" size={20} /><input type="text" placeholder="Cari posisi..." className="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" onChange={(e) => setSearchTerm(e.target.value)}/></div>
                        <select className="w-full md:w-auto px-4 py-2 border rounded-lg outline-none bg-white max-w-xs" onChange={(e) => setFilterCategory(e.target.value)}><option value="All">Semua Jurusan</option>{MAJORS.map((m,i)=><option key={i} value={m}>{m}</option>)}</select>
                    </div>
                </div>
                <div className="max-w-7xl mx-auto px-4 py-12">
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {jobs.map(job => <JobCard key={job.id} job={job} onApply={handleApply} />)}
                    </div>
                </div>
                </>
            );
        };

        const LoginView = ({ handleLogin, handleGoogleLogin, loginForm, setLoginForm, setView }) => {
            const [showPassword, setShowPassword] = useState(false);
            return (
                <div className="min-h-screen bg-gray-100 flex items-center justify-center relative">
                    <button onClick={() => setView('home')} className="absolute top-6 left-6 flex items-center text-gray-500 hover:text-blue-900 font-medium"><Icon component={ChevronRight} size={20} className="rotate-180 mr-1"/> Kembali ke Beranda</button>
                    <div className="max-w-md w-full bg-white p-10 rounded-xl shadow-lg">
                        <div className="text-center mb-8"><Icon component={School} className="mx-auto h-12 w-12 text-blue-900"/><h2 className="mt-4 text-3xl font-extrabold text-gray-900">Masuk ke BKK</h2></div>
                        <button onClick={handleGoogleLogin} className="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 mb-6 font-medium shadow-sm"><GoogleIcon className="mr-3"/> Masuk dengan Google</button>
                        <div className="relative mb-6"><div className="absolute inset-0 flex items-center"><div className="w-full border-t border-gray-300"></div></div><div className="relative flex justify-center text-sm"><span className="px-2 bg-white text-gray-500">Atau login manual</span></div></div>
                        <form className="space-y-5" onSubmit={handleLogin}>
                            <div className="relative"><div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><Icon component={User} size={20} className="text-gray-400"/></div><input type="text" required className="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-blue-500" placeholder="NISN / Email" value={loginForm.identifier} onChange={e => setLoginForm({...loginForm, identifier: e.target.value})} /></div>
                            <div className="relative"><div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><Icon component={Lock} size={20} className="text-gray-400"/></div><input type={showPassword ? "text" : "password"} required className="block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-blue-500" placeholder="Password" value={loginForm.password} onChange={e => setLoginForm({...loginForm, password: e.target.value})} /><button type="button" onClick={() => setShowPassword(!showPassword)} className="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400"><Icon component={showPassword ? EyeOff : Eye} size={20}/></button></div>
                            <button type="submit" className="w-full py-3 px-4 border border-transparent text-sm font-bold rounded-lg text-white bg-blue-900 hover:bg-blue-800 shadow-md">Masuk</button>
                        </form>
                    </div>
                </div>
            );
        };

        const StudentDashboard = ({ user }) => (
            <div className="max-w-7xl mx-auto px-4 py-8"><h2 className="text-2xl font-bold mb-6">Halo, {user.name}</h2><div className="bg-white p-6 rounded shadow"><p>Fitur Dashboard Siswa aktif.</p></div></div>
        );
        const CompanyDashboard = ({ user }) => (
            <div className="max-w-7xl mx-auto px-4 py-8"><h2 className="text-2xl font-bold mb-6">Halo, {user.companyName}</h2><div className="bg-white p-6 rounded shadow"><p>Fitur Dashboard Perusahaan aktif.</p></div></div>
        );
        const AdminDashboard = ({ users }) => (
            <div className="max-w-7xl mx-auto px-4 py-8"><h2 className="text-2xl font-bold mb-6">Admin Dashboard</h2><div className="bg-white p-6 rounded shadow"><p>Total User: {users.length}</p></div></div>
        );

        // --- MAIN APP ---
        function App() {
            const [view, setView] = useState('home');
            const [user, setUser] = useState(null);
            const [jobs, setJobs] = useState(INITIAL_JOBS);
            const [users, setUsers] = useState(INITIAL_USERS);
            const [loginForm, setLoginForm] = useState({ identifier: '', password: '' });
            const [notification, setNotification] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterCategory, setFilterCategory] = useState('All');

            const showNotification = (msg, type = 'success') => {
                setNotification({ msg, type });
                setTimeout(() => setNotification(null), 3000);
            };

            const handleLogin = (e) => {
                e.preventDefault();
                const found = users.find(u => (u.email === loginForm.identifier || u.nisn === loginForm.identifier));
                if (found) { setUser(found); setView(found.role === 'student' ? 'dashboard_student' : found.role === 'company' ? 'dashboard_company' : 'dashboard_admin'); }
                else showNotification('User tidak ditemukan', 'error');
            };
            
            const handleGoogleLogin = () => {
                const email = prompt("Masukkan Email Google Anda:", "nama@gmail.com");
                if(email && email.includes("@gmail.com")) {
                    let u = users.find(u => u.email === email);
                    if(!u) {
                        u = { id: Date.now(), name: email.split('@')[0], role: 'student', email, nisn: Math.floor(Math.random()*10000).toString(), major: 'Umum', status: 'Belum Bekerja' };
                        setUsers([...users, u]);
                    }
                    setUser(u); setView('dashboard_student');
                }
            };
            
            const handleApply = (job) => { if(!user) setView('login'); else showNotification('Berhasil melamar!'); };

            const filteredJobs = jobs.filter(j => j.title.toLowerCase().includes(searchTerm.toLowerCase()) && (filterCategory === 'All' || j.category === filterCategory));

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800 relative">
                    {notification && <div className={`fixed top-20 right-5 z-50 px-6 py-3 rounded text-white ${notification.type === 'error' ? 'bg-red-500' : 'bg-green-500'}`}>{notification.msg}</div>}
                    {view !== 'login' && <Navbar view={view} setView={setView} user={user} handleLogout={() => { setUser(null); setView('home'); }} />}
                    
                    {view === 'home' && <PublicHome jobs={filteredJobs} setSearchTerm={setSearchTerm} setFilterCategory={setFilterCategory} handleApply={handleApply} setView={setView} />}
                    {view === 'alumni_data' && <AlumniDataView />}
                    {view === 'login' && <LoginView handleLogin={handleLogin} handleGoogleLogin={handleGoogleLogin} loginForm={loginForm} setLoginForm={setLoginForm} setView={setView} />}
                    {view === 'dashboard_student' && <StudentDashboard user={user} />}
                    {view === 'dashboard_company' && <CompanyDashboard user={user} />}
                    {view === 'dashboard_admin' && <AdminDashboard users={users} />}
                    
                    <Chatbot />
                    <footer className="bg-blue-900 text-white py-6 mt-auto text-center"><p>&copy; 2025 BKK SMKN 12 Surabaya. Developed by @budhisant</p></footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
